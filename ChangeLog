# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--lcourtes@laas.fr--2004-libre/scheme-reader--devo--0.1
#

2005-08-24 12:40:06 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-6

    Summary:
      Cleaned up the reader's code, augmented the API, fixed TR bugs.
    Revision:
      scheme-reader--devo--0.1--patch-6

    * reader.c (read_token_spec):  Handle sets.
      (scm_make_token_reader):  Fixed a bug when a Scheme proc is passed.
      (token-reader-procedure):  New function.
      (token-reader-specification):  New function.
      (token_reader_free):  Free the set if it's a set.
      (scm_to_reader_spec):  Removed.
      (read_token_reader_spec):  Removed.
    
    * reader.scm:  Export the above new procedures.
    
    * test-repl.scm (test-token-reader):  New variable.
    
    * token-readers.c (read_token):  Stop whenever a non-alphanumeric char is
      read (like a bracket).
      (scm_reader_standard_specs):  Added `.' to `symbol-misc-chars';  this
      fixes the sexp readers for pairs.

    modified files:
     ChangeLog Makefile.am reader.c reader.scm test-repl.scm
     token-readers.c


2005-08-23 17:11:25 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-5

    Summary:
      Fixed and improved the token readers.
    Revision:
      scheme-reader--devo--0.1--patch-5

    * reader.c (scm_c_make_reader):  Produce code that returns `SCM_EOF_VAL'
      when EOF is read.
    
    * test-repl.scm:  Account for this.
    
    * token-readers.c (scm_read_symbol):  Removed the size limitation;  call
      `scm_read_number ()' when reading a number.
      (scm_read_number_and_radix):  New function.
      (scm_read_number):  Removed the size limitation;  allow to read for
      floating points, signed numbers, or symbols.

    modified files:
     ChangeLog reader.c test-repl.scm token-readers.c


2005-08-23 15:19:47 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-4

    Summary:
      Implemented first-class token readers.
    Revision:
      scheme-reader--devo--0.1--patch-4

    * Makefile.am (lib_LTLIBRARIES):  Renamed the lib to `libguile-reader.la'.
    
    * reader.c (scm_reader_smob_t):  New structure.
      (SCM_NEW_READER_SMOB):  New macro.
      (SCM_READER_SMOB_DATA):  New macro.
      (SCM_TOKEN_READER_SMOB_DATA):  New macro.
      (scm_c_make_reader):  Added calls to `CHECK_CODE_SIZE ()'.
      (scm_token_reader_lookup):  Moved to `token-readers.c'.
      (scm_from_reader):  New function.
      (scm_from_token_reader):  New function.
      (scm_to_reader):  New function.
      (scm_make_reader):  Changed.  Now expects a list of token reader SMOBs.
      (scm_make_token_reader):  New function.
      (scm_standard_token_reader):  New function.
      (scm_token_reader_type):  New variable.
    
    * reader.h (scm_token_reader_type):  New declaration.
    
    * reader.scm:  Export the new procs.
    
    * test-repl.scm:  Updated.
    
    * token-readers.c (scm_read_symbol):  Bail out on numbers.
      (scm_read_number):  Expect hexadecimal digits.
      (scm_read_keyword):  Call `scm_read_symbol' instead of SCM_READER.
      (scm_read_extended_symbol):  New function.
      (scm_token_reader_lookup):  New function.
      (scm_reader_misc_specs):  New variable.
    
    * token-readers.h:  Slightly updated.
    
    * extract-token-readers.sh:  New (unused) file.

    new files:
     .arch-ids/extract-token-readers.sh.id extract-token-readers.sh

    modified files:
     ChangeLog Makefile.am reader.c reader.h reader.scm
     test-repl.scm token-readers.c token-readers.h


2005-08-19 16:15:40 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-3

    Summary:
      Allowed to build readers from reader; modularized out the `#' reader.
    Revision:
      scheme-reader--devo--0.1--patch-3

    Warning:  This is somewhat broken, in particular lookup of existing token
    readers from `scm_standard_*reader_specs'.
    
    * configure.ac:  New file.
    
    * Makefile.am:  New file.
    
    * reader.c (scm_c_make_reader):  Handle calls to `scm_reader_t' C
      functions (SCM_TOKEN_READER_READER); use the new
      `scm_token_reader_type_t' enum.
      (default-reader):  New function.
      (dynr_init_bindings):  Call `scm_load_standard_reader ()'.
    
    * reader.h (scm_token_reader_type_t):  New enum.
      (scm_token_reader_spec_t):  Use that.
    
    * token-readers.c (scm_standard_sharp_reader):  New specs.
      (scm_read_sharp):  Splitted in several readers.
      (scm_reader_standard_specs):  Now depends on
      `scm_standard_sharp_reader'.
      (scm_read_skribe_literal):  Renamed to `scm_read_skribe_exp'.
    
    * reader.scm (dynamic-link):  Appended the `.so' extension.
    
    * COPYING, AUTHORS, NEWS, ChangeLog:  New (dummy) files.

    new files:
     .arch-ids/AUTHORS.id .arch-ids/COPYING.id
     .arch-ids/ChangeLog.id .arch-ids/NEWS.id
     .arch-ids/configure.ac.id AUTHORS COPYING ChangeLog NEWS
     configure.ac

    modified files:
     Makefile.am reader.c reader.h reader.scm test-repl.scm
     token-readers.c token-readers.h {arch}/=tagging-method

    renamed files:
     .arch-ids/Makefile.id
       ==> .arch-ids/Makefile.am.id
     Makefile
       ==> Makefile.am


2005-06-28 15:38:12 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-2

    Summary:
      Now allows to pass Scheme reader specifications to `make-reader'.
    Revision:
      scheme-reader--devo--0.1--patch-2

    * reader.c (scm_c_make_reader):  Added generation of code that allows
      to call token readers written as Scheme procedures.
      (dynr_make_reader):  Renamed to `scm_make_reader'.
      (token_spec_to_string):  New function.
      (do_scm_make_char):  New function.
      (read_token_spec):  New function.
      (read_token_reader_spec):  New function.
      (scm_to_reader_spec):  Use the above functions.

    modified files:
     reader.c


2005-06-27 17:15:08 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-1

    Summary:
      Starting exporting `scm_c_make_reader ()' to Scheme.
    Revision:
      scheme-reader--devo--0.1--patch-1

    * reader.c (CHECK_CODE_SIZE):  Increased the threshold.
      (scm_c_make_reader):  Added `CHECK_CODE_SIZE ()' invocations.
      If no reader was specified for a given char, call `scm_ungetc ()'.
      (scm_token_reader_lookup):  New function.
      (scm_to_reader_spec):  New function.
      (make-reader):  Use `scm_to_reader_spec ()'.
      (scm_reader_type):  New SMOB type.
    
    * reader.h (scm_reader_spec_t):  New type.
    
    * test-repl.scm:  Use the new API of `make-reader'.

    modified files:
     reader.c reader.h test-repl.scm


2005-06-24 16:39:08 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	base-0

    Summary:
      Initial import of a JIT-compiled, extensible, Scheme reader definition mechanism.
    Revision:
      scheme-reader--devo--0.1--base-0

    Initial import.
    

    new files:
     Makefile README reader.c reader.h reader.scm test-repl.scm
     token-readers.c token-readers.h


