# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--lcourtes@laas.fr--2004-libre/scheme-reader--devo--0.1
#

2005-09-12 11:39:10 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-12

    Summary:
      Got ready for release 0.1.
    Revision:
      scheme-reader--devo--0.1--patch-12

    * Makefile.am (EXTRA_DIST):  Added $(TESTS).
      (%.doc):  New (unused) rule.
    
    * configure.ac:  Look for `scm_take_u8vector' in order to make sure we're
      using Guile 1.7.
    
    * doc/guile-reader.texi:  Significantly augmented.
    
    * extract-token-readers.sh:  Handle the `--no-gperf-header' option
      (currently unused).
    
    * reader.c (scm_c_make_reader):  When CALLER_HANDLED is a procedure,
      don't use `jit_pusharg_p ((void *)start' (which is wrong), use
      `jit_pusharg_p (JIT_R1)' instead.
    
    * testsuite.scm:  Use `(ice-9 format)'.

    modified files:
     ChangeLog Makefile.am configure.ac doc/guile-reader.texi
     extract-token-readers.sh reader.c testsuite.scm


2005-09-12 07:33:10 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-11

    Summary:
      GC and TR bug fixes;  renamed module;  cleaned build process;  doc.
    Revision:
      scheme-reader--devo--0.1--patch-11

    Patches applied:
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-10
       Fixed token readers for the remaining corner cases;  now reads `boot-9.scm'.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-11
       Updated the Lightning-free implementation.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-12
       Cleaned up the build and installation process.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-13
       Fixed a GC bug;  renamed the reader module;  exported more C functions.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-14
       Added a documentation skeleton.
    

    new files:
     doc/.arch-ids/=id doc/.arch-ids/Makefile.am.id
     doc/.arch-ids/texinfo.tex.id doc/Makefile.am
     doc/guile-reader.texi doc/texinfo.tex guile.c
     module/.arch-ids/=id module/.arch-ids/Makefile.am.id
     module/Makefile.am module/system/.arch-ids/=id
     module/system/.arch-ids/Makefile.am.id
     module/system/Makefile.am

    modified files:
     ChangeLog Makefile.am configure.ac module/system/reader.scm
     reader.c reader.h test-repl.scm testsuite.scm token-readers.c

    renamed files:
     .arch-ids/reader.scm.id
       ==> module/system/.arch-ids/reader.scm.id
     reader.scm
       ==> module/system/reader.scm

    new directories:
     doc doc/.arch-ids module module/.arch-ids module/system
     module/system/.arch-ids

    new patches:
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-10
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-11
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-12
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-13
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-14


2005-09-07 17:02:41 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-10

    Summary:
      New testsuite;  now able to define a fault handler, or to let the caller handle them.
    Revision:
      scheme-reader--devo--0.1--patch-10

    Patches applied:
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-6
       Added support for reader fault handlers;  wrote a test suite.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-7
       Added the capability to escape to token readers.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-8
       Allow for caller handling of a reader's unhandled characters.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-9
       Added support for complex numbers, fixed a number of TRs.
    

    new files:
     testsuite.scm

    modified files:
     ChangeLog Makefile.am reader.c reader.h test-repl.scm
     token-readers.c token-readers.h

    new patches:
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-6
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-7
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-8
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-9


2005-09-01 16:19:34 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-9

    Summary:
      Merge with laptop:  various bug fixes and an API improvement (still buggy).
    Revision:
      scheme-reader--devo--0.1--patch-9

    Patches applied:
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--base-0
       tag of lcourtes@laas.fr--2004-libre/scheme-reader--devo--0.1--patch-2
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-1
       Merged with the main development branch.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-2
       Optimized a bit the `token-reader-proc' case.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-3
       Fixed two bugs that showed up when SCSH block comments were used.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-4
       Simplification of `scm_c_make_reader ()';  small bug fixes.
    
     * lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-5
       Various GC-related and other bug fixes.
    

    new files:
     .arch-ids/INSTALL.id .arch-ids/reader-config.h.in.id INSTALL
     reader-config.h.in test-repl.scm

    removed files:
     .arch-ids/test-repl.scm.id test-repl.scm

    modified files:
     ChangeLog Makefile.am README configure.ac reader.c reader.h
     token-readers.c token-readers.h {arch}/=tagging-method

    new patches:
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--base-0
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-1
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-2
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-3
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-4
     lcourtes@laas.fr--2005-mobile/scheme-reader--devo--0.1--patch-5


2005-08-26 16:00:40 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-8

    Summary:
      Added a SMOB type representing C-implemented token reader procedures.
    Revision:
      scheme-reader--devo--0.1--patch-8

    * reader.c (token-reader-procedure):  Return a `token-reader-proc' SMOB
      is reader is a C reader.
      (scm_token_reader_proc_type):  New variable.
      (token_reader_proc_apply):  New proc.
      (token_reader_proc_free):  New proc.
      (token_reader_proc_mark):  New proc.
      (scm_reader_init_bindings):  Init the new SMOB type.
    
    * reader.h (scm_token_reader_proc_type):  New declaration.

    modified files:
     ChangeLog reader.c reader.h


2005-08-24 17:04:06 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-7

    Summary:
      Implemented and tested the Lightning-free version of `scm_c_make_reader ()'.
    Revision:
      scheme-reader--devo--0.1--patch-7

    * reader.h (scm_call_reader):  New macro.
    
    * reader.c (scm_call_reader):  New function.
      (tr_handles_char):  New function.
      (tr_invoke):  New function.
    
    * token-readers.c:  Call readers using `scm_call_reader ()'.

    modified files:
     ChangeLog reader.c reader.h token-readers.c


2005-08-24 12:40:06 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-6

    Summary:
      Cleaned up the reader's code, augmented the API, fixed TR bugs.
    Revision:
      scheme-reader--devo--0.1--patch-6

    * reader.c (read_token_spec):  Handle sets.
      (scm_make_token_reader):  Fixed a bug when a Scheme proc is passed.
      (token-reader-procedure):  New function.
      (token-reader-specification):  New function.
      (token_reader_free):  Free the set if it's a set.
      (scm_to_reader_spec):  Removed.
      (read_token_reader_spec):  Removed.
    
    * reader.scm:  Export the above new procedures.
    
    * test-repl.scm (test-token-reader):  New variable.
    
    * token-readers.c (read_token):  Stop whenever a non-alphanumeric char is
      read (like a bracket).
      (scm_reader_standard_specs):  Added `.' to `symbol-misc-chars';  this
      fixes the sexp readers for pairs.

    modified files:
     ChangeLog Makefile.am reader.c reader.scm test-repl.scm
     token-readers.c


2005-08-23 17:11:25 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-5

    Summary:
      Fixed and improved the token readers.
    Revision:
      scheme-reader--devo--0.1--patch-5

    * reader.c (scm_c_make_reader):  Produce code that returns `SCM_EOF_VAL'
      when EOF is read.
    
    * test-repl.scm:  Account for this.
    
    * token-readers.c (scm_read_symbol):  Removed the size limitation;  call
      `scm_read_number ()' when reading a number.
      (scm_read_number_and_radix):  New function.
      (scm_read_number):  Removed the size limitation;  allow to read for
      floating points, signed numbers, or symbols.

    modified files:
     ChangeLog reader.c test-repl.scm token-readers.c


2005-08-23 15:19:47 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-4

    Summary:
      Implemented first-class token readers.
    Revision:
      scheme-reader--devo--0.1--patch-4

    * Makefile.am (lib_LTLIBRARIES):  Renamed the lib to `libguile-reader.la'.
    
    * reader.c (scm_reader_smob_t):  New structure.
      (SCM_NEW_READER_SMOB):  New macro.
      (SCM_READER_SMOB_DATA):  New macro.
      (SCM_TOKEN_READER_SMOB_DATA):  New macro.
      (scm_c_make_reader):  Added calls to `CHECK_CODE_SIZE ()'.
      (scm_token_reader_lookup):  Moved to `token-readers.c'.
      (scm_from_reader):  New function.
      (scm_from_token_reader):  New function.
      (scm_to_reader):  New function.
      (scm_make_reader):  Changed.  Now expects a list of token reader SMOBs.
      (scm_make_token_reader):  New function.
      (scm_standard_token_reader):  New function.
      (scm_token_reader_type):  New variable.
    
    * reader.h (scm_token_reader_type):  New declaration.
    
    * reader.scm:  Export the new procs.
    
    * test-repl.scm:  Updated.
    
    * token-readers.c (scm_read_symbol):  Bail out on numbers.
      (scm_read_number):  Expect hexadecimal digits.
      (scm_read_keyword):  Call `scm_read_symbol' instead of SCM_READER.
      (scm_read_extended_symbol):  New function.
      (scm_token_reader_lookup):  New function.
      (scm_reader_misc_specs):  New variable.
    
    * token-readers.h:  Slightly updated.
    
    * extract-token-readers.sh:  New (unused) file.

    new files:
     .arch-ids/extract-token-readers.sh.id extract-token-readers.sh

    modified files:
     ChangeLog Makefile.am reader.c reader.h reader.scm
     test-repl.scm token-readers.c token-readers.h


2005-08-19 16:15:40 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-3

    Summary:
      Allowed to build readers from reader; modularized out the `#' reader.
    Revision:
      scheme-reader--devo--0.1--patch-3

    Warning:  This is somewhat broken, in particular lookup of existing token
    readers from `scm_standard_*reader_specs'.
    
    * configure.ac:  New file.
    
    * Makefile.am:  New file.
    
    * reader.c (scm_c_make_reader):  Handle calls to `scm_reader_t' C
      functions (SCM_TOKEN_READER_READER); use the new
      `scm_token_reader_type_t' enum.
      (default-reader):  New function.
      (dynr_init_bindings):  Call `scm_load_standard_reader ()'.
    
    * reader.h (scm_token_reader_type_t):  New enum.
      (scm_token_reader_spec_t):  Use that.
    
    * token-readers.c (scm_standard_sharp_reader):  New specs.
      (scm_read_sharp):  Splitted in several readers.
      (scm_reader_standard_specs):  Now depends on
      `scm_standard_sharp_reader'.
      (scm_read_skribe_literal):  Renamed to `scm_read_skribe_exp'.
    
    * reader.scm (dynamic-link):  Appended the `.so' extension.
    
    * COPYING, AUTHORS, NEWS, ChangeLog:  New (dummy) files.

    new files:
     .arch-ids/AUTHORS.id .arch-ids/COPYING.id
     .arch-ids/ChangeLog.id .arch-ids/NEWS.id
     .arch-ids/configure.ac.id AUTHORS COPYING ChangeLog NEWS
     configure.ac

    modified files:
     Makefile.am reader.c reader.h reader.scm test-repl.scm
     token-readers.c token-readers.h {arch}/=tagging-method

    renamed files:
     .arch-ids/Makefile.id
       ==> .arch-ids/Makefile.am.id
     Makefile
       ==> Makefile.am


2005-06-28 15:38:12 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-2

    Summary:
      Now allows to pass Scheme reader specifications to `make-reader'.
    Revision:
      scheme-reader--devo--0.1--patch-2

    * reader.c (scm_c_make_reader):  Added generation of code that allows
      to call token readers written as Scheme procedures.
      (dynr_make_reader):  Renamed to `scm_make_reader'.
      (token_spec_to_string):  New function.
      (do_scm_make_char):  New function.
      (read_token_spec):  New function.
      (read_token_reader_spec):  New function.
      (scm_to_reader_spec):  Use the above functions.

    modified files:
     reader.c


2005-06-27 17:15:08 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	patch-1

    Summary:
      Starting exporting `scm_c_make_reader ()' to Scheme.
    Revision:
      scheme-reader--devo--0.1--patch-1

    * reader.c (CHECK_CODE_SIZE):  Increased the threshold.
      (scm_c_make_reader):  Added `CHECK_CODE_SIZE ()' invocations.
      If no reader was specified for a given char, call `scm_ungetc ()'.
      (scm_token_reader_lookup):  New function.
      (scm_to_reader_spec):  New function.
      (make-reader):  Use `scm_to_reader_spec ()'.
      (scm_reader_type):  New SMOB type.
    
    * reader.h (scm_reader_spec_t):  New type.
    
    * test-repl.scm:  Use the new API of `make-reader'.

    modified files:
     reader.c reader.h test-repl.scm


2005-06-24 16:39:08 GMT	Ludovic Court`es <ludovic.courtes@laas.fr>	base-0

    Summary:
      Initial import of a JIT-compiled, extensible, Scheme reader definition mechanism.
    Revision:
      scheme-reader--devo--0.1--base-0

    Initial import.
    

    new files:
     Makefile README reader.c reader.h reader.scm test-repl.scm
     token-readers.c token-readers.h


